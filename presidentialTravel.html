<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Trevor Cox's Website</title>
    <link rel="stylesheet" type="text/css" href="./main.css">
    <link rel="stylesheet" type="text/css" href="./header.css">
    <link rel="stylesheet" type="text/css" href="./footer.css">
    <link rel="stylesheet" type="text/css" href="./GlobalTravel.css">
    <link rel="stylesheet" type="text/css" href="./presidentialTravel.css">
    <link rel="icon" type="image/x-icon" href="Images/favicon.ico">
    <script src="//unpkg.com/globe.gl"></script>
    <!--<script src="../../dist/globe.gl.js"></script>-->
</head>

<body>
    <header id="header"></header>
    <script src="loadHeader.js"></script>
    <h2>Here you can select Presidents and their international trips by year</h2>

    <div class="container">
        <div class="presidential-selector">
            <ul class="h" id="pres-nav">
                <li class="pres-nav-item" data-president="Teddy">Teddy</li>
                <li class="pres-nav-item" data-president="Taft">Taft</li>
                <li class="pres-nav-item" data-president="Wilson">Wilson</li>
                <li class="pres-nav-item" data-president="Harding">Harding</li>
                <li class="pres-nav-item" data-president="Coolidge">Coolidge</li>
                <li class="pres-nav-item" data-president="Hoover">Hoover</li>
                <li class="pres-nav-item" data-president="FDR">FDR</li>
                <li class="pres-nav-item" data-president="Truman">Truman</li>
                <li class="pres-nav-item" data-president="Eisenhower">Eisenhower</li>
                <li class="pres-nav-item" data-president="JFK">JFK</li>
                <li class="pres-nav-item" data-president="LBJ">LBJ</li>
                <li class="pres-nav-item" data-president="Nixon">Nixon</li>
                <li class="pres-nav-item" data-president="Ford">Ford</li>
                <li class="pres-nav-item" data-president="Carter">Carter</li>
                <li class="pres-nav-item" data-president="Reagan">Reagan</li>
                <li class="pres-nav-item" data-president="Bush Sr.">Bush Sr.</li>
                <li class="pres-nav-item" data-president="Clinton">Clinton</li>
                <li class="pres-nav-item" data-president="Bush Jr.">Bush Jr.</li>
                <li class="pres-nav-item" data-president="Obama">Obama</li>
                <li class="pres-nav-item" data-president="Trump">Trump</li>
                <li class="pres-nav-item" data-president="Biden">Biden</li>
            </ul>
        </div>
        <div class="content-wrapper">
            <div class="dropdown">
                <button class="collapsible">Select Year</button>
                <div class="content">
                    <ul id="arcList"></ul>
                </div>
            </div>
            <div id="globeViz"></div>
        </div>
    </div>


    <script type="module">
        let datasets, allArcs, labelsDefaultCities;

        // Function to dynamically import the dataset based on the selected president
        async function loadDataset(president) {
            try {
                if (president === 'FDR') {
                    const module = await import('./PresidentialTravelsDataStructures/define_fdr_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Truman') {
                    const module = await import('./PresidentialTravelsDataStructures/define_truman_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Eisenhower') {
                    const module = await import('./PresidentialTravelsDataStructures/define_eisenhower_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'JFK') {
                    const module = await import('./PresidentialTravelsDataStructures/define_jfk_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'LBJ') {
                    const module = await import('./PresidentialTravelsDataStructures/define_lbj_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Nixon') {
                    const module = await import('./PresidentialTravelsDataStructures/define_nixon_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Ford') {
                    const module = await import('./PresidentialTravelsDataStructures/define_ford_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Carter') {
                    const module = await import('./PresidentialTravelsDataStructures/define_carter_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Reagan') {
                    const module = await import('./PresidentialTravelsDataStructures/define_reagan_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Bush Sr.') {
                    const module = await import('./PresidentialTravelsDataStructures/define_bushsr_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Clinton') {
                    const module = await import('./PresidentialTravelsDataStructures/define_clinton_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Bush Jr.') {
                    const module = await import('./PresidentialTravelsDataStructures/define_bushjr_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Obama') {
                    const module = await import('./PresidentialTravelsDataStructures/define_obama_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Trump') {
                    const module = await import('./PresidentialTravelsDataStructures/define_trump_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Biden') {
                    const module = await import('./PresidentialTravelsDataStructures/define_biden_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else {
                    console.error(`Error loading data for ${president}: `, error);
                }
                console.log(datasets); // You can see the loaded datasets in the console
                updateArcList();
                globe.labelsData(labelsDefaultCities);
                globe.arcsData(allArcs);
                globe.pointOfView({ lat: 38.9072, lng: -77.0369, altitude: 2 }, 3000); // Adjusts the globe's view smoothly over 3 seconds to DC
            } catch (error) {
                console.error(`Error loading data for ${president}: `, error);
            }
        }

        // Function to dynamically populate the arc list
        function updateArcList() {
            const list = document.getElementById('arcList');
            list.innerHTML = ''; // Clear any previous list

            // Dynamically populate arcList menu with available datasets
            Object.keys(datasets).forEach(dataset => {
                const listItem = document.createElement('li');
                listItem.textContent = dataset;
                if (dataset === "All Cities") {
                    listItem.classList.add('selected');
                }

                // Changes style of selected li and removes style from previously selected li
                listItem.addEventListener('click', function () {
                    list.querySelectorAll('.selected').forEach(item => item.classList.remove('selected'));
                    listItem.classList.add('selected');

                    // Update the arcs and labels on the globe
                    globe.arcsData(datasets[dataset].arcs).labelsData(datasets[dataset].labels);

                    // Optionally, animate the globe to the dataset's view
                    // globe.pointOfView({ lat: 38.9072, lng: -77.0369, altitude: 1.75 }, 3000); // Example: Adjusting the globe's view to Washington, DC
                });
                list.appendChild(listItem);
            });
        }

        // Add event listeners to each president <li> to load their respective data
        document.querySelectorAll('.pres-nav-item').forEach(item => {
            item.addEventListener('click', function () {
                // Remove the 'selected' class from all items
                document.querySelectorAll('.pres-nav-item').forEach(i => i.classList.remove('selected'));

                // Add the 'selected' class to the clicked item
                this.classList.add('selected');

                // Get the president's name and load the dataset
                const president = this.getAttribute('data-president');
                loadDataset(president);  // Load dataset based on the selected president

                // Get the collapsible button and content
                const coll = document.querySelector('.collapsible');
                const content = document.querySelector('.content');

                // Check if the collapsible content is already open
                if (coll.classList.contains('active')) {
                    // If it's open, close it first
                    coll.classList.remove('active');
                    content.style.maxHeight = null;
                }

                // Open the collapsible content (set maxHeight) after closing it, to simulate reopening
                coll.classList.add('active');
                content.style.maxHeight = content.scrollHeight + 270 + "px";
            });
        });

        // Collapsible button functionality for the dropdown
        const coll = document.querySelector('.collapsible');
        const content = document.querySelector('.content');
        coll.addEventListener('click', function () {
            this.classList.toggle('active');
            if (content.style.maxHeight) {
                content.style.maxHeight = null; // Close the menu if it's open
            } else {
                content.style.maxHeight = content.scrollHeight + 270 + "px"; // Open the menu if it's closed
            }
        });
    </script>

    <script src="createPresidentialTravelGlobe.js"></script>
    <h2>Back to my <a href="GlobalTravel.html">Globe!</a></h2>

    <div id="footer-container"></div>
    <script src="LoadFooter.js"></script>
</body>