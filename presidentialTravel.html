<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Trevor Cox's Website</title>
    <link rel="stylesheet" type="text/css" href="./main.css">
    <link rel="stylesheet" type="text/css" href="./header.css">
    <link rel="stylesheet" type="text/css" href="./footer.css">
    <link rel="stylesheet" type="text/css" href="./GlobalTravel.css">
    <link rel="icon" type="image/x-icon" href="Images/favicon.ico">
    <script src="//unpkg.com/globe.gl"></script>
      <!--<script src="../../dist/globe.gl.js"></script>-->
</head>

<body>
    <header id="header"></header>
    <script src="loadHeader.js"></script>
    <h2>Here you can select Presidents and Travel Years</h2>
    <ul class="h">
        <li class="h" data-president="FDR">FDR</li>
        <li class="h" data-president="Truman">Truman</li>
        <li class="h" data-president="Eisenhower">Eisenhower</li>
        <li class="h" data-president="JFK">JFK</li>
        <li class="h" data-president="LBJ">LBJ</li>
        <li class="h" data-president="Nixon">Nixon</li>
        <li class="h" data-president="Ford">Ford</li>
        <li class="h" data-president="Carter">Carter</li>
        <li class="h" data-president="Reagan">Reagan</li>
        <li class="h" data-president="Bush Sr.">Bush Sr.</li>
        <li class="h" data-president="Clinton">Clinton</li>
        <li class="h" data-president="Bush Jr.">Bush Jr.</li>
        <li class="h" data-president="Obama">Obama</li>
        <li class="h" data-president="Trump">Trump</li>
        <li class="h" data-president="Biden">Biden</li>
    </ul>

    <div class="container">
        <div class="dropdown">
            <button class="collapsible">Select Year</button>
            <div class="content">
                <ul id="arcList"></ul>
            </div>
        </div>
        <div id="globeViz"></div>
    </div>

    <script type="module">
        let datasets, allArcs, labelsDefaultCities;

        // Function to dynamically import the dataset based on the selected president
        async function loadDataset(president) {
            try {
                if (president === 'FDR') {
                    const module = await import('./PresidentialTravelsDataStructures/define_fdr_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Truman') {
                    const module = await import('./PresidentialTravelsDataStructures/define_truman_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Eisenhower') {
                    const module = await import('./PresidentialTravelsDataStructures/define_eisenhower_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'JFK') {
                    const module = await import('./PresidentialTravelsDataStructures/define_jfk_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'LBJ') {
                    const module = await import('./PresidentialTravelsDataStructures/define_lbj_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Nixon') {
                    const module = await import('./PresidentialTravelsDataStructures/define_nixon_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Carter') {
                    const module = await import('./PresidentialTravelsDataStructures/define_carter_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Reagan') {
                    const module = await import('./PresidentialTravelsDataStructures/define_reagan_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Bush Sr.') {
                    const module = await import('./PresidentialTravelsDataStructures/define_bushsr_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Clinton') {
                    const module = await import('./PresidentialTravelsDataStructures/define_clinton_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Bush Jr.') {
                    const module = await import('./PresidentialTravelsDataStructures/define_bushjr_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Obama') {
                    const module = await import('./PresidentialTravelsDataStructures/define_obama_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Trump') {
                    const module = await import('./PresidentialTravelsDataStructures/define_trump_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else if (president === 'Biden') {
                    const module = await import('./PresidentialTravelsDataStructures/define_biden_travels.js');
                    datasets = module.datasets;
                    allArcs = module.allArcs;
                    labelsDefaultCities = module.labelsDefaultCities;
                } else {
                    console.error(`Error loading data for ${president}: `, error);
                }
                console.log(datasets); // You can see the loaded datasets in the console
                updateArcList();
            } catch (error) {
                console.error(`Error loading data for ${president}: `, error);
            }
        }

        // Function to dynamically populate the arc list
        function updateArcList() {
            const list = document.getElementById('arcList');
            list.innerHTML = ''; // Clear any previous list

            // Dynamically populate arcList menu with available datasets
            Object.keys(datasets).forEach(dataset => {
                const listItem = document.createElement('li');
                listItem.textContent = dataset;
                if (dataset === "All Cities") {
                    listItem.classList.add('selected');
                }

                // Changes style of selected li and removes style from previously selected li
                listItem.addEventListener('click', function () {
                    list.querySelectorAll('.selected').forEach(item => item.classList.remove('selected'));
                    listItem.classList.add('selected');

                    // Update the arcs and labels on the globe
                    globe.arcsData(datasets[dataset].arcs).labelsData(datasets[dataset].labels);

                    // Optionally, animate the globe to the dataset's view
                    // globe.pointOfView({ lat: 38.9072, lng: -77.0369, altitude: 1.75 }, 3000); // Example: Adjusting the globe's view to Washington, DC
                });
                list.appendChild(listItem);
            });
        }

        // Add event listeners to each president <li> to load their respective data
        document.querySelectorAll('.h').forEach(item => {
            item.addEventListener('click', function () {
                const president = this.getAttribute('data-president');
                loadDataset(president);  // Load dataset based on the selected president
            });
        });

        // Collapsible button functionality for the dropdown
        const coll = document.querySelector('.collapsible');
        const content = document.querySelector('.content');
        coll.addEventListener('click', function () {
            this.classList.toggle('active');
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + 180 + "px";
            }
        });
    </script>

    <script src="createPresidentialTravelGlobe.js"></script>
    <h2>Back to my <a href="GlobalTravel.html">Globe!</a></h2>

    <div id="footer-container"></div>
    <script src="LoadFooter.js"></script>
</body>
