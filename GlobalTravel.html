<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>Trevor Cox's Website</title>
  <link rel="stylesheet" type="text/css" href="./main.css">
  <link rel="stylesheet" type="text/css" href="./header.css">
  <link rel="stylesheet" type="text/css" href="./footer.css">
  <link rel="stylesheet" type="text/css" href="./GlobalTravel.css">
  <link rel="icon" type="image/x-icon" href="Images/favicon.ico">
  <audio id="my_audio" src="Songs/PlanetEarth.mp3"></audio>
  <script>
    window.onload = function () {
      document.getElementById("my_audio").play();
    }
  </script>
  <script src="//unpkg.com/globe.gl"></script>
  <!--<script src="../../dist/globe.gl.js"></script>-->
</head>

<body>
  <header id="header"></header>
  <script src="loadHeader.js"></script>
  <h2>These arcs show my international travels and moves.</h2>
  <h2>(It's a work in progress)</h2>
  <div>
    <button id="playPauseBtn">Play</button>
  </div>
  <script src="PlayPause.js"></script>

  <div class="container">
    <div class="dropdown">
      <button class="collapsible">Select Dataset</button>
      <div class="content">
        <ul id="arcList"></ul>
      </div>
    </div>
    <div id="globeViz"></div>
  </div>

  <script src="defineArcDataSets.js"></script>

  <script>// Define all datasets  
    const datasets = {
      "All Travels & Moves": [...arcs2008IrelandTrip, ...arcs2016StudyAbroad, ...arcs2018EuroTrip, ...arcs2021MexicoTrip,
      ...arcs2022EuroTrip, ...arcs2025SkiTrips, ...arcsPeaceCorpsTravels, ...arcsUSAMoves],
      "USA Moves": arcsUSAMoves,
      "2025 Ski Trips": arcs2025SkiTrips,
      "2022-2024 Peace Corps Travels": arcsPeaceCorpsTravels,
      "2021 & 2022 Euro Trips": arcs2022EuroTrip,
      "2021 Mexico Trip": arcs2021MexicoTrip,
      "2018 Euro Trip": arcs2018EuroTrip,
      "2016 Study Abroad": arcs2016StudyAbroad,
      "2008 Ireland Trip": arcs2008IrelandTrip
    };

    // Populate list dynamically.
    const list = document.getElementById('arcList');
    Object.keys(datasets).forEach(dataset => {
      const listItem = document.createElement('li');
      listItem.textContent = dataset;
      if (dataset === "All Travels & Moves") {
    listItem.classList.add('selected');
  }
      listItem.addEventListener('click', function () {
        // Remove the 'selected' class from any previously selected <li>
        const selectedItems = list.querySelectorAll('.selected');
        selectedItems.forEach(item => item.classList.remove('selected'));

        // Add the 'selected' class to the clicked <li>
        listItem.classList.add('selected');

        // Load the data for the clicked item
        globe.arcsData(datasets[dataset]);
      });
      list.appendChild(listItem);
    });

    // Function to update the border radius based on screen width
    function updateBorderRadius() {
      const lastListItem = list.lastElementChild;
      if (!lastListItem) return;

      if (window.matchMedia("(max-width: 740px)").matches) {
        lastListItem.style.borderRadius = "0 0 20px 20px"; // Mobile behavior
      } else {
        lastListItem.style.borderRadius = "0 0 0 20px"; // Default behavior
      }
    }

    // Run on initial load
    updateBorderRadius();

    // Add an event listener to update on window resize
    window.addEventListener("resize", updateBorderRadius);


    // Collapsible button functionality
    const coll = document.querySelector('.collapsible');
    const content = document.querySelector('.content');
    coll.addEventListener('click', function () {
      this.classList.toggle('active');
      if (content.style.maxHeight) {
        content.style.maxHeight = null;
      } else {
        content.style.maxHeight = content.scrollHeight + 180 + "px";
      }
    });    
  </script>

  <script src="createTravelGlobe.js"></script>

  <div id="footer-container"></div>
  <script src="LoadFooter.js"></script>
</body>